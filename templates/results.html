{% extends 'base.html' %}

{% block head %}
<title>Results</title>
{% endblock %}

{% block body %}

<!-- Form being sent to selected movie containing values of each checkbox item -->
<div class="content">
<!-- CHANGED form action to /submit instead of /selected_movie -->
    <form action="/results" method="POST">
        <!--   name attribute is what gets passed on submission to app.py     -->
        <input type="text" placeholder="Enter a film or TV series" name="search_query" id="content">
        <input type="submit" value="Search">
    </form>

    <br>

    <form action="/submit" method="POST">
        <!-- submit button for checkboxes of movies -->
        <div>
            <button class="submit_button" type="submit">Submit</button>
        </div>

        <!-- Generate a grid of movie titles using movie posters as labels for the checkboxes -->
        {% for title in titles %}
        <input type="checkbox" name="checked_title" id="{{ title['id'] }}"
               class="custom_checkbox" value="{{ title }}"/>
        <!-- Only display titles that have a poster -->
        {% if title['image'] %}
        <label for="{{ title['id'] }}" class="checkbox_label">
            <p>{{ title['title'] }} - {{ title['year'] }}</p>
            <img class='selected' src="{{ title['image']['url'] }}">
        </label>
        {% endif %}
        {% endfor %}
    </form>
</div>

{% endblock %}